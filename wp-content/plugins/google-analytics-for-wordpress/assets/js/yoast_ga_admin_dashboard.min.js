function dimension_switch(a){"use strict";a=jQuery(a);var b=a.closest(".wpseotab").find(".yoast-data-table"),c="";jQuery.each(b,function(a,b){c+='<option value="'+jQuery(b).attr("id")+'">'+jQuery(b).attr("data-label")+"</option>"}),a.append(c),b.not(":eq(0)").hide(),setTimeout(function(){a.chosen().change(function(){b.hide(),jQuery("#"+jQuery(this).val()).show()})},1500)}jQuery.fn.extend({yoast_ga_table:function(){"use strict";return this.each(function(){var a=jQuery(this),b=jQuery(a).attr("id"),c={init:function(){this.get_data()},get_data:function(){var c={action:"yoast_dashboard_tabledata",_ajax_nonce:yoast_ga_dashboard_nonce,graph_id:b,period:"lastmonth",dimension_id:jQuery(a).attr("data-dimension")};jQuery.getJSON(ajaxurl,c,this.parse_response)},parse_response:function(b){a.find("table").dataTable({columns:[{data:"name"},{data:"value"}],data:b.data,order:[1,"dsc"],language:{aria:{sortAscending:dashboard_translate.sort_ascending,sortDescending:dashboard_translate.sort_descending},emptyTable:dashboard_translate.empty_table,info:dashboard_translate.info,infoEmpty:dashboard_translate.info_empty,infoFiltered:dashboard_translate.info_filtered,lengthMenu:dashboard_translate.length_menu,loadingRecords:dashboard_translate.loading_records,paginate:{first:dashboard_translate.pagination_first,last:dashboard_translate.pagination_last,next:dashboard_translate.pagination_next,previous:dashboard_translate.pagination_previous},processing:dashboard_translate.processing,search:"_INPUT_",searchPlaceholder:dashboard_translate.search_placeholder,zeroRecords:dashboard_translate.zero_records}})}};c.init()})},yoast_ga_graph:function(){"use strict";return this.each(function(){var a=this.id,b=jQuery(this),c=jQuery(b).attr("id"),d=document.getElementById(c),e={data:[],axis:{x:[],y:[]},hover:[],width:780,height:240,graph:"",graph_axis:{x:"",y:""},graph_hover:[],init:function(){this.get_data(),this.add_events()},add_events:function(){var a=this;jQuery(b).on("graph_update",function(b,c){a.update(c,a)})},get_data:function(){var a={action:"yoast_dashboard_graphdata",_ajax_nonce:yoast_ga_dashboard_nonce,graph_id:c,period:"lastmonth"};jQuery.getJSON(ajaxurl,a,this.parse_response)},parse_response:function(a){e.set_data(a.data),void 0!==a.mapping.x&&e.set_x_axis_mapping(a.mapping.x),void 0!==a.mapping.y&&e.set_y_axis_mapping(a.mapping.y),void 0!==a.mapping.hover&&e.set_hover_mapping(a.mapping.hover),e.create()},set_data:function(a){this.data=a},add_data:function(a){e.data.push(a)},set_x_axis_mapping:function(a){e.axis.x=a},add_x_axis_mapping:function(a){this.axis.x.push(a)},set_y_axis_mapping:function(a){e.axis.y=a},set_hover_mapping:function(a){e.hover=a},add_y_axis_mapping:function(a){this.axis.y.push(a)},create:function(){this.truncate_element(),this.create_graph(),this.create_axis(),this.create_hover(),this.render()},truncate_element:function(){b.find("> div").html("")},create_graph:function(){var c=.1,e="graph-bounceRate"===a?100+100*c:void 0;this.graph=new Rickshaw.Graph({element:d.querySelector(".yoast-graph-holder"),width:this.width,height:this.height,series:[{name:b.attr("data-label"),color:"#e6f4fa",stroke:"#058dc7",data:this.data}],renderer:"area",stroke:!0,interpolation:"linear",padding:{top:c,bottom:.02},max:e})},create_axis:function(){this.create_x_axis(),this.create_y_axis()},create_x_axis:function(){null!==d.querySelector(".yoast-graph-xaxis")&&(this.graph_axis.x=new Rickshaw.Graph.Axis.X({element:d.querySelector(".yoast-graph-xaxis"),graph:this.graph,tickFormat:this.format_axis_x,grid:!0,orientation:"bottom",tickValues:Object.keys(this.axis.x)}))},create_y_axis:function(){null!==d.querySelector(".yoast-graph-xaxis")&&(this.graph_axis.y=new Rickshaw.Graph.Axis.Y({element:d.querySelector(".yoast-graph-yaxis"),graph:this.graph,orientation:"left",height:"240",tickFormat:function(a){return 0===a?"":a}}))},create_hover:function(){this.graph_hover=new Rickshaw.Graph.HoverDetail({graph:this.graph,formatter:function(a,c,d){var f=e.hover[c];"1"===b.attr("data-percent")&&(f+="%");var g='<span class="detail_swatch" style="background-color: '+a.color+'"></span>',h=g+f+"<br />";return h}})},render:function(){this.graph.render()},format_axis_x:function(a){return e.axis.x[a]},update:function(a,b){b.add_data(a.data),b.add_x_axis_mapping(a.mapping),b.graph.update(),b.render()}};e.init()})},yoast_ga_graph_update:function(a){"use strict";jQuery(this).trigger("graph_update",[a])},yoast_ga_table_update:function(a){"use strict";jQuery(this).trigger("table_update",[a])}}),jQuery(function(){"use strict";jQuery(".yoast-graph").yoast_ga_graph(),jQuery(".yoast-data-table").yoast_ga_table()});